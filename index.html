<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Controle Robô Otto Ninja</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin: 0;
        padding: 20px;
      }
      h1 {
        margin-bottom: 20px;
      }
      .joystick-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
      .joystick {
        display: flex;
        justify-content: center;
        gap: 10px;
      }
      .joystick input[type="range"] {
        width: 150px;
      }
      .buttons {
        display: flex;
        gap: 20px;
        margin-top: 20px;
      }
      .button {
        padding: 12px 25px;
        font-size: 16px;
        cursor: pointer;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 5px;
      }
      .button:active {
        background-color: #45a049;
      }
      .slider-label {
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <h1>Controle Robô Otto Ninja</h1>

    <!-- Joystick Controles -->
    <div class="joystick-container">
      <div class="joystick">
        <div class="slider-label">Joystick X</div>
        <input type="range" id="joystickX" min="-100" max="100" value="0" />
        <span id="joystickXVal">0</span>
      </div>
      <div class="joystick">
        <div class="slider-label">Joystick Y</div>
        <input type="range" id="joystickY" min="-100" max="100" value="0" />
        <span id="joystickYVal">0</span>
      </div>
    </div>

    <!-- Botões para controle -->
    <div class="buttons">
      <button id="btnWalk" class="button">Andar</button>
      <button id="btnRoll" class="button">Rolar</button>
      <button id="btnLeftArm" class="button">Braço Esquerdo</button>
      <button id="btnRightArm" class="button">Braço Direito</button>
    </div>

    <script>
      // Referências para os controles do joystick
      const joystickX = document.getElementById("joystickX");
      const joystickY = document.getElementById("joystickY");
      const joystickXVal = document.getElementById("joystickXVal");
      const joystickYVal = document.getElementById("joystickYVal");

      // Referências para os botões
      const btnWalk = document.getElementById("btnWalk");
      const btnRoll = document.getElementById("btnRoll");
      const btnLeftArm = document.getElementById("btnLeftArm");
      const btnRightArm = document.getElementById("btnRightArm");

      // Envia os dados de joystick para o servidor
      function sendJoystickData() {
        const x = joystickX.value;
        const y = joystickY.value;
        joystickXVal.textContent = x;
        joystickYVal.textContent = y;

        // Envia para o servidor (substitua pela URL correta do seu ESP8266)
        fetch(`http://192.168.1.100:8080/control?x=${x}&y=${y}`)
          .then((response) => response.json())
          .then((data) => console.log("Dados enviados:", data))
          .catch((error) => console.error("Erro ao enviar dados:", error));
      }

      // Envia comandos dos botões para o servidor
      function sendButtonCommand(command) {
        fetch(`http://192.168.1.100:8080/command?command=${command}`)
          .then((response) => response.json())
          .then((data) => console.log(`Comando ${command} enviado`, data))
          .catch((error) => console.error("Erro ao enviar comando:", error));
      }

      // Atualiza os valores dos controles do joystick
      joystickX.addEventListener("input", sendJoystickData);
      joystickY.addEventListener("input", sendJoystickData);

      // Adiciona eventos de clique para os botões
      btnWalk.addEventListener("click", () => sendButtonCommand("walk"));
      btnRoll.addEventListener("click", () => sendButtonCommand("roll"));
      btnLeftArm.addEventListener("click", () => sendButtonCommand("leftArm"));
      btnRightArm.addEventListener("click", () =>
        sendButtonCommand("rightArm")
      );
    </script>
  </body>
</html>
